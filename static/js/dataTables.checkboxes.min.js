/*
   Copyright (c) Gyrocode
 @license     MIT License
 Checkboxes 1.2.11
  Copyright (c) Gyrocode (www.gyrocode.com)
  License: MIT License
*/
(function(e){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(l){return e(l,window,document)}):"object"===typeof exports?module.exports=function(l,m){l||(l=window);m&&m.fn.dataTable||(m=require("datatables.net")(l,m).$);return e(m,l,l.document)}:e(jQuery,window,document)})(function(e,l,m){var p=e.fn.dataTable,n=function(a){if(!p.versionCheck||!p.versionCheck("1.10.8"))throw"DataTables Checkboxes requires DataTables 1.10.8 or newer";this.s={dt:new p.Api(a),columns:[],
data:[],dataDisabled:[],ignoreSelect:!1};this.s.ctx=this.s.dt.settings()[0];this.s.ctx.checkboxes||(a.checkboxes=this,this._constructor())};n.prototype={_constructor:function(){for(var a=this,c=a.s.dt,b=a.s.ctx,d=!1,g=!1,f=0;f<b.aoColumns.length;f++)if(b.aoColumns[f].checkboxes){var h=e(c.column(f).header());d=!0;e.isPlainObject(b.aoColumns[f].checkboxes)||(b.aoColumns[f].checkboxes={});b.aoColumns[f].checkboxes=e.extend({},n.defaults,b.aoColumns[f].checkboxes);var k={searchable:!1,orderable:!1};
k.className=""===b.aoColumns[f].sClass?"dt-checkboxes-cell":b.aoColumns[f].sClass+" dt-checkboxes-cell";null===b.aoColumns[f].sWidthOrig&&(k.width="1%");null===b.aoColumns[f].mRender&&(k.render=function(){return'<input type="checkbox" class="dt-checkboxes">'});p.ext.internal._fnColumnOptions(b,f,k);h.removeClass("sorting");h.off(".dt");if(null===b.sAjaxSource){var q=c.cells("tr",f);q.invalidate("data");e(q.nodes()).addClass(k.className)}a.s.data[f]={};a.s.dataDisabled[f]={};a.s.columns.push(f);b.aoColumns[f].checkboxes.selectRow&&
(b._select?g=!0:b.aoColumns[f].checkboxes.selectRow=!1);b.aoColumns[f].checkboxes.selectAll&&(h.data("html",h.html()),null!==b.aoColumns[f].checkboxes.selectAllRender&&(k="",e.isFunction(b.aoColumns[f].checkboxes.selectAllRender)?k=b.aoColumns[f].checkboxes.selectAllRender():"string"===typeof b.aoColumns[f].checkboxes.selectAllRender&&(k=b.aoColumns[f].checkboxes.selectAllRender),h.html(k).addClass("dt-checkboxes-select-all").attr("data-col",f)))}if(d){a.loadState();d=e(c.table().node());f=e(c.table().body());
h=e(c.table().container());g&&(d.addClass("dt-checkboxes-select"),d.on("user-select.dt.dtCheckboxes",function(b,c,d,f,g){a.onDataTablesUserSelect(b,c,d,f,g)}),d.on("select.dt.dtCheckboxes deselect.dt.dtCheckboxes",function(b,c,d,f){a.onDataTablesSelectDeselect(b,d,f)}),c.select.info(!1),d.on("draw.dt.dtCheckboxes select.dt.dtCheckboxes deselect.dt.dtCheckboxes",function(){a.showInfoSelected()}));d.on("draw.dt.dtCheckboxes",function(b){a.onDataTablesDraw(b)});f.on("click.dtCheckboxes","input.dt-checkboxes",
function(b){a.onClick(b,this)});h.on("click.dtCheckboxes",'thead th.dt-checkboxes-select-all input[type="checkbox"]',function(b){a.onClickSelectAll(b,this)});h.on("click.dtCheckboxes","thead th.dt-checkboxes-select-all",function(){e('input[type="checkbox"]',this).not(":disabled").trigger("click")});if(!g)h.on("click.dtCheckboxes","tbody td.dt-checkboxes-cell",function(){e('input[type="checkbox"]',this).not(":disabled").trigger("click")});h.on("click.dtCheckboxes","thead th.dt-checkboxes-select-all label, tbody td.dt-checkboxes-cell label",
function(a){a.preventDefault()});e(m).on("click.dtCheckboxes",'.fixedHeader-floating thead th.dt-checkboxes-select-all input[type="checkbox"]',function(c){if(b._fixedHeader&&b._fixedHeader.dom.header.floating)a.onClickSelectAll(c,this)});e(m).on("click.dtCheckboxes",".fixedHeader-floating thead th.dt-checkboxes-select-all",function(){b._fixedHeader&&b._fixedHeader.dom.header.floating&&e('input[type="checkbox"]',this).trigger("click")});d.on("init.dt.dtCheckboxes",function(){a.onDataTablesInit()});
d.on("stateSaveParams.dt.dtCheckboxes",function(b,c,d){a.onDataTablesStateSave(b,c,d)});d.one("destroy.dt.dtCheckboxes",function(b,c){a.onDataTablesDestroy(b,c)})}},onDataTablesInit:function(){var a=this,c=a.s.dt,b=a.s.ctx;b.oFeatures.bServerSide||(b.oFeatures.bStateSave&&a.updateState(),e(c.table().node()).on("xhr.dt.dtCheckboxes",function(b,c,f,e){a.onDataTablesXhr(b.settings,f,e)}))},onDataTablesUserSelect:function(a,c,b,d){d=d.index().row;b=this.getSelectRowColIndex();c=c.cell({row:d,column:b}).data();
this.isCellSelectable(b,c)||a.preventDefault()},onDataTablesSelectDeselect:function(a,c,b){var d=this.s.dt;this.s.ignoreSelect||"row"!==c||(c=this.getSelectRowColIndex(),null!==c&&(b=d.cells(b,c),this.updateData(b,c,"select"===a.type?!0:!1),this.updateCheckbox(b,c,"select"===a.type?!0:!1),this.updateSelectAll(c)))},onDataTablesStateSave:function(a,c,b){var d=this,g=d.s.ctx;b.checkboxes=[];e.each(d.s.columns,function(a,c){g.aoColumns[c].checkboxes.stateSave&&(b.checkboxes[c]=d.s.data[c])})},onDataTablesDestroy:function(){var a=
this.s.dt,c=e(a.table().node()),b=e(a.table().body());a=e(a.table().container());e(m).off("click.dtCheckboxes");a.off(".dtCheckboxes");b.off(".dtCheckboxes");c.off(".dtCheckboxes");this.s.data={};this.s.dataDisabled={};e(".dt-checkboxes-select-all",c).each(function(a,b){e(b).html(e(b).data("html")).removeClass("dt-checkboxes-select-all")})},onDataTablesDraw:function(){var a=this,c=a.s.ctx;(c.oFeatures.bServerSide||c.oFeatures.bDeferRender)&&a.updateStateCheckboxes({page:"current",search:"none"});
e.each(a.s.columns,function(b,c){a.updateSelectAll(c)})},onDataTablesXhr:function(){var a=this,c=a.s.ctx,b=e(a.s.dt.table().node());e.each(a.s.columns,function(b,c){a.s.data[c]={};a.s.dataDisabled[c]={}});c.oFeatures.bStateSave&&(a.loadState(),b.one("draw.dt.dtCheckboxes",function(){a.updateState()}))},updateData:function(a,c,b){var d=this.s.dt,e=this.s.ctx;e.aoColumns[c].checkboxes&&(a.data().each(function(a){b?e.checkboxes.s.data[c][a]=1:delete e.checkboxes.s.data[c][a]}),e.oFeatures.bStateSave&&
e.aoColumns[c].checkboxes.stateSave&&d.state.save())},updateSelect:function(a,c){var b=this.s.dt;this.s.ctx._select&&(this.s.ignoreSelect=!0,c?b.rows(a).select():b.rows(a).deselect(),this.s.ignoreSelect=!1)},updateCheckbox:function(a,c,b){var d=this.s.ctx;a=a.nodes();a.length&&(e("input.dt-checkboxes",a).not(":disabled").prop("checked",b),e.isFunction(d.aoColumns[c].checkboxes.selectCallback)&&d.aoColumns[c].checkboxes.selectCallback(a,b))},updateState:function(){var a=this;a.updateStateCheckboxes({page:"all",
search:"none"});e.each(a.s.columns,function(c,b){a.updateSelectAll(b)})},updateStateCheckboxes:function(a){var c=this,b=c.s.ctx;c.s.dt.cells("tr",c.s.columns,a).every(function(a,g){var d=this.data(),h=c.isCellSelectable(g,d);b.checkboxes.s.data[g].hasOwnProperty(d)&&(c.updateCheckbox(this,g,!0),b.aoColumns[g].checkboxes.selectRow&&h&&c.updateSelect(a,!0));h||e("input.dt-checkboxes",this.node()).prop("disabled",!0)})},onClick:function(a,c){var b=this,d=b.s.dt,g=b.s.ctx;var f=e(c).closest("td");f=f.parents(".DTFC_Cloned").length?
d.fixedColumns().cellIndex(f):f;var h=d.cell(f),k=h.index().column;g.aoColumns[k].checkboxes.selectRow?setTimeout(function(){var a=h.data();a=b.s.data[k].hasOwnProperty(a);a!==c.checked&&(b.updateCheckbox(h,k,a),b.updateSelectAll(k))},0):(h.checkboxes.select(c.checked),a.stopPropagation())},onClickSelectAll:function(a,c){var b=this.s.dt,d=this.s.ctx;var g=e(c).closest("th");g=g.parents(".DTFC_Cloned").length?b.fixedColumns().cellIndex(g).column:b.column(g).index();e(c).data("is-changed",!0);b.column(g,
{page:d.aoColumns[g].checkboxes&&d.aoColumns[g].checkboxes.selectAllPages?"all":"current",search:"applied"}).checkboxes.select(c.checked);a.stopPropagation()},loadState:function(){var a=this,c=a.s.dt,b=a.s.ctx;if(b.oFeatures.bStateSave){var d=c.state.loaded();e.each(a.s.columns,function(c,e){d&&d.checkboxes&&d.checkboxes.hasOwnProperty(e)&&b.aoColumns[e].checkboxes.stateSave&&(a.s.data[e]=d.checkboxes[e])})}},updateSelectAll:function(a){var c=this,b=c.s.dt,d=c.s.ctx;if(d.aoColumns[a].checkboxes&&
d.aoColumns[a].checkboxes.selectAll){var g=b.cells("tr",a,{page:d.aoColumns[a].checkboxes.selectAllPages?"all":"current",search:"applied"});b=b.table().container();b=e('.dt-checkboxes-select-all[data-col="'+a+'"] input[type="checkbox"]',b);var f=0,h=0;g=g.data();e.each(g,function(b,d){c.isCellSelectable(a,d)?c.s.data[a].hasOwnProperty(d)&&f++:h++});d._fixedHeader&&d._fixedHeader.dom.header.floating&&(b=e('.fixedHeader-floating .dt-checkboxes-select-all[data-col="'+a+'"] input[type="checkbox"]'));
if(0===f)var k=g=!1;else f+h===g.length?(g=!0,k=!1):k=g=!0;var l=b.data("is-changed"),m=b.prop("checked"),n=b.prop("indeterminate");if(l||m!==g||n!==k)b.data("is-changed",!1),b.prop({checked:g,indeterminate:k}),e.isFunction(d.aoColumns[a].checkboxes.selectAllCallback)&&d.aoColumns[a].checkboxes.selectAllCallback(b.closest("th").get(0),g,k)}},showInfoSelected:function(){var a=this.s.dt,c=this.s.ctx;if(c.aanFeatures.i){var b=this.getSelectRowColIndex();if(null!==b){var d=0,g;for(g in c.checkboxes.s.data[b])c.checkboxes.s.data[b].hasOwnProperty(g)&&
d++;e.each(c.aanFeatures.i,function(b,c){var f=e(c),g=e('<span class="select-info"/>'),h=d;g.append(e('<span class="select-item"/>').append(a.i18n("select.rows",{_:"%d rows selected",0:"",1:"1 row selected"},h)));h=f.children("span.select-info");h.length&&h.remove();""!==g.text()&&f.append(g)})}}},isCellSelectable:function(a,c){return this.s.ctx.checkboxes.s.dataDisabled[a].hasOwnProperty(c)?!1:!0},getCellIndex:function(a){var c=this.s.dt;return this.s.ctx._oFixedColumns?c.fixedColumns().cellIndex(a):
c.cell(a).index()},getSelectRowColIndex:function(){for(var a=this.s.ctx,c=null,b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].checkboxes&&a.aoColumns[b].checkboxes.selectRow){c=b;break}return c},updateFixedColumn:function(a){var c=this.s.dt,b=this.s.ctx;if(b._oFixedColumns){var d=b.aoColumns.length-b._oFixedColumns.s.iRightColumns-1;(a<b._oFixedColumns.s.iLeftColumns||a>d)&&c.fixedColumns().update()}}};n.defaults={stateSave:!0,selectRow:!1,selectAll:!0,selectAllPages:!0,selectCallback:null,selectAllCallback:null,
selectAllRender:'<div class="checkbox"><input type="checkbox" class="dt-checkboxes"><label></label></div>'};l=e.fn.dataTable.Api;l.register("checkboxes()",function(){return this});l.registerPlural("columns().checkboxes.select()","column().checkboxes.select()",function(a){"undefined"===typeof a&&(a=!0);return this.iterator("column-rows",function(c,b,d,g,f){if(c.aoColumns[b].checkboxes){var h=[];e.each(f,function(a,c){h.push({row:c,column:b})});d=this.cells(h);d=d.data();var k=[];h=[];e.each(d,function(a,
d){c.checkboxes.isCellSelectable(b,d)&&(h.push({row:f[a],column:b}),k.push(f[a]))});d=this.cells(h);c.checkboxes.updateData(d,b,a);c.checkboxes.updateCheckbox(d,b,a);c.aoColumns[b].checkboxes.selectRow&&c.checkboxes.updateSelect(k,a);c._oFixedColumns?setTimeout(function(){c.checkboxes.updateSelectAll(b)},0):c.checkboxes.updateSelectAll(b);c.checkboxes.updateFixedColumn(b)}},1)});l.registerPlural("cells().checkboxes.select()","cell().checkboxes.select()",function(a){"undefined"===typeof a&&(a=!0);
return this.iterator("cell",function(c,b,d){if(c.aoColumns[d].checkboxes){var e=this.cells([{row:b,column:d}]),f=this.cell({row:b,column:d}).data();c.checkboxes.isCellSelectable(d,f)&&(c.checkboxes.updateData(e,d,a),c.checkboxes.updateCheckbox(e,d,a),c.aoColumns[d].checkboxes.selectRow&&c.checkboxes.updateSelect(b,a),c._oFixedColumns?setTimeout(function(){c.checkboxes.updateSelectAll(d)},0):c.checkboxes.updateSelectAll(d),c.checkboxes.updateFixedColumn(d))}},1)});l.registerPlural("cells().checkboxes.enable()",
"cell().checkboxes.enable()",function(a){"undefined"===typeof a&&(a=!0);return this.iterator("cell",function(c,b,d){if(c.aoColumns[d].checkboxes){var g=this.cell({row:b,column:d}),f=g.data();a?delete c.checkboxes.s.dataDisabled[d][f]:c.checkboxes.s.dataDisabled[d][f]=1;(g=g.node())&&e("input.dt-checkboxes",g).prop("disabled",!a);c.aoColumns[d].checkboxes.selectRow&&c.checkboxes.s.data[d].hasOwnProperty(f)&&c.checkboxes.updateSelect(b,a)}},1)});l.registerPlural("cells().checkboxes.disable()","cell().checkboxes.disable()",
function(a){"undefined"===typeof a&&(a=!0);return this.checkboxes.enable(!a)});l.registerPlural("columns().checkboxes.deselect()","column().checkboxes.deselect()",function(a){"undefined"===typeof a&&(a=!0);return this.checkboxes.select(!a)});l.registerPlural("cells().checkboxes.deselect()","cell().checkboxes.deselect()",function(a){"undefined"===typeof a&&(a=!0);return this.checkboxes.select(!a)});l.registerPlural("columns().checkboxes.deselectAll()","column().checkboxes.deselectAll()",function(){return this.iterator("column",
function(a,c){a.aoColumns[c].checkboxes&&(a.checkboxes.s.data[c]={},this.column(c).checkboxes.select(!1))},1)});l.registerPlural("columns().checkboxes.selected()","column().checkboxes.selected()",function(){return this.iterator("column-rows",function(a,c,b,d,g){if(a.aoColumns[c].checkboxes){var f=[];if(a.oFeatures.bServerSide)e.each(a.checkboxes.s.data[c],function(b){a.checkboxes.isCellSelectable(c,b)&&f.push(b)});else{var h=[];e.each(g,function(a,b){h.push({row:b,column:c})});b=this.cells(h).data();
e.each(b,function(b,d){a.checkboxes.s.data[c].hasOwnProperty(d)&&a.checkboxes.isCellSelectable(c,d)&&f.push(d)})}return f}return[]},1)});n.version="1.2.11";e.fn.DataTable.Checkboxes=n;e.fn.dataTable.Checkboxes=n;e(m).on("preInit.dt.dtCheckboxes",function(a,c){"dt"===a.namespace&&new n(c)});return n});